FlowBuilder
    Используеться для кастомизации потока перед регистрацией.

    XML:

        <webflow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices">
            <webflow:flow-location path="/WEB-INF/flows/booking/booking.xml" />
        </webflow:flow-registry>

        <webflow:flow-builder-services id="flowBuilderServices" />



        @Bean
        public FlowDefinitionRegistry flowRegistry() {
        return getFlowDefinitionRegistryBuilder(flowBuilderServices())
            .addFlowLocation("/WEB-INF/flows/booking/booking.xml")
            .build();
        }

        @Bean
        public FlowBuilderServices flowBuilderServices() {
            return getFlowBuilderServicesBuilder().build();
        }

Настройка сервисов

    XML:

    <webflow:flow-builder-services id="flowBuilderServices"
        conversion-service="conversionService"
        expression-parser="expressionParser"
        view-factory-creator="viewFactoryCreator" />

    <bean id="conversionService" class="..." />
    <bean id="expressionParser" class="..." />
    <bean id="viewFactoryCreator" class="..." />


    JAVA:

        @Bean
        public FlowBuilderServices flowBuilderServices() {
        return getFlowBuilderServicesBuilder()
            .setConversionService(conversionService())
            .setExpressionParser(expressionParser)
            .setViewFactoryCreator(mvcViewFactoryCreator())
            .build();
        }

        @Bean
        public ConversionService conversionService() {
            // ...
        }

        @Bean
        public ExpressionParser expressionParser() {
            // ...
        }

        @Bean
        public ViewFactoryCreator viewFactoryCreator() {
            // ...
        }

conversion-service

    Предостовляет услуги конвертции елементов. По умолчанию базовые типы + обьекты


expression-parser

    Предоствляет услуги обработки выражений. По умолчанию Spring EL

view-factory-creator

    Предоствляет обработчик для представления. По умолчнию Spring MVC ViewFactories (JSP,Velocity,Freemarker)